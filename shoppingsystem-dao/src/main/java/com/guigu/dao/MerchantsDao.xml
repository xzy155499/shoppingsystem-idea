<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.guigu.dao.MerchantsDao">

    <resultMap id="MerchantsMap" type="Merchants">

        <id column="m_id" property="mId"></id>
        <result column="m_name" property="mName"></result>
        <result column="m_username" property="mUsername"></result>
        <result column="m_img" property="mImg"></result>
        <result column="m_sex" property="mSex"></result>
        <result column="m_coordinates" property="mCoordinates"></result>
        <result column="m_note" property="mNote"></result>
        <result column="m_province" property="mProvince"></result>
        <result column="m_city" property="mCity"></result>
        <result column="m_county" property="mCounty"></result>
        <result column="m_state" property="mState"></result>
        <result column="m_stores_name" property="mStoresName"></result>
        <result column="m_detailed_address" property="mDetailedAddress"></result>
        <result column="m_time" property="mTime"></result>
        <result column="m_pwd" property="mPwd"></result>
        <result column="m_phone" property="mPhone"></result>
    </resultMap>

    <select id="queryMerchantsById" resultMap="MerchantsMap" parameterType="int">
        select * from merchants where m_id = #{id}
	</select>
    <select id="queryAllMerchants" resultMap="MerchantsMap" parameterType="Merchants">
        select * from merchants
        <where>
            <if test="mName!=null">and m_name like concat('%',#{mName},'%')</if>
        </where>
	</select>

    <select id="queryMerchantsCount" resultType="int"  parameterType="Merchants">
        select count(*) from merchants
        <where>
            <if test="mName!=null">and m_name like concat('%',#{mName},'%')</if>
        </where>
	</select>
    <select id="loginMerchants" resultMap="MerchantsMap"  parameterType="merchants">
        select * from merchants where m_username=#{mUsername} AND m_pwd =#{mPwd}
    </select>


    <insert id="addMerchants">
INSERT INTO `shoppingdb`.`merchants` (
  `w_name`,
  `w_coordinates`,
  `w_note`,
  `w_province`,
  `w_city`,
  `w_county`,
  `w_detailed`
)
VALUES
  (
    #{wName},
    #{wCoordinates},
    #{wNote},
    #{wProvince},
    #{wCity},
    #{wCounty},
    #{wDetailed}
  ) ;
    </insert>
    <delete id="delMerchants">
        UPDATE
  `shoppingdb`.`merchants`
SET
  `m_state` = '禁用' where `m_id`=#{id};
    </delete>

<update id="updMerchants">
UPDATE
  `shoppingdb`.`merchants`
SET
  `m_stores_name` = #{mStoresName},
  `m_name` = #{mName},
  `m_username` = #{mUsername},
  `m_pwd` = #{mPwd},
  `m_sex` = #{mSex},
  `m_coordinates` = #{mCoordinates},
  `m_note` = #{mNote},
  `m_province` = #{mProvince},
  `m_city` = #{mCity},
  `m_county` = #{mCounty},
  `m_detailed_address` = #{mDetailedAddress},
  `m_phone` = #{mPhone}
WHERE `m_id` = #{mId} ;
</update>
    <update id="updMarehouseImg">
        UPDATE
  `shoppingdb`.`merchants`
SET
  `m_img` = #{mImg}
WHERE `m_id` = #{mId} ;
    </update>


</mapper>
